<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> | Glen Berseth</title>
    <link rel="canonical" href="/posts_drafts/2015-10-21-simulation-engine-flow-of-control">
    

    <meta property="og:title" content="">
    <meta property="og:url" content="/posts_drafts/2015-10-21-simulation-engine-flow-of-control">
    <meta property="og:site_name" content="Glen Berseth">
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="">

	<script type="text/javascript" id="MathJax-script" async
	  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
	</script>
    <script type="application/ld+json">
    {"@type":"WebSite","headline":"Glen Berseth","url":"/","name":"Glen Berseth","@context":"https://schema.org"}</script>
    <!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css">
    <!-- <link rel="stylesheet" href="/assets/main.css"> --></head>
<body><header class="site-header">

    <div class="wrapper"><a class="site-title" rel="author" href="/">Glen Berseth</a><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
                <span class="menu-icon">
                    <svg viewBox="0 0 18 15" width="18px" height="15px">
                        <path d="M1.5 1.5 h15 M1.5 7.5 h15 M1.5 13.5 h15" stroke="black" stroke-width="3" stroke-linecap="round" />
                      </svg>
                </span>
            </label>

            <div class="trigger">
                    <a class="page-link" href="/">Home</a>
                
                    <a class="page-link" href="/people/">People</a>
                
                    <a class="page-link" href="/publications/">Publications</a>
                
                    <a class="page-link" href="/join/">Join Us</a>
                
                    <a class="page-link" href="/posts/">Posts</a>
                
                    <a class="page-link" href="/teaching/">Teaching</a>
                
                <a class="page-link" href="/fr/posts_drafts/2015-10-21-simulation-engine-flow-of-control">Fr</a>
                
            </div>
        </nav></div>
    
</header>
<main class="page-content" aria-label="Content">
        <div class="wrapper">
            <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Animation/Simulation System flow of control</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2015-10-22T00:56:00-04:00" itemprop="datePublished">Oct 21, 2015
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Glen Berseth</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Simulation for animation is no easy task. There are many steps when constructing an animation and figuring out when particular data should be instantiated can be tricky. I am going to go over one method I have been using to help organize the steps and structure that could be used to construct the simulation flow of control.<br /><br /><br /><br /><br />This is for a Simulation Engine that I have been using in my work.<br /><br />The main steps in the Simulation engine <br />&lt;ol&gt;&lt;li&gt;init() (allocating libraries and structures)&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Create empty data structures&lt;/li&gt;&lt;li&gt;Create spatial database&lt;/li&gt;&lt;li&gt;Create planning domain&lt;/li&gt;&lt;li&gt;Modules::init()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Initialize any modules that are going to be used in the simulation&lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;ol&gt;&lt;li&gt;At this point the libraries the user specified are loaded and some  global structures are created. Some examples of global structures are  the spatial database and the pathPlanning envirionment.&lt;/li&gt;&lt;ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;li&gt;initializeSimulation()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Fill the global data structures&lt;/li&gt;&lt;li&gt;Add all the obstacles to the simulation (All Static geometry and items)&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Must be in place before agents are reset/initialized. &lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;li&gt;preprocessSimulation()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Preconditions&lt;/li&gt;&lt;ol&gt;&lt;li&gt;All obstacles should be loaded into the environment &lt;/li&gt;&lt;/ol&gt;&lt;li&gt;Preprocess all modules&lt;/li&gt;&lt;li&gt;refresh the planning domain&lt;/li&gt;&lt;li&gt;add agents to simulation &lt;/li&gt;&lt;li&gt;The simulation should be completely setup and ready for simulation. &lt;/li&gt;&lt;/ol&gt;&lt;li&gt;preprocessFrame()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Store simulation data &lt;/li&gt;&lt;li&gt;Maybe you want to collect some data on the performance of the simulation &lt;/li&gt;&lt;/ol&gt;&lt;li&gt;update()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Step all of the modules in the system &lt;/li&gt;&lt;/ol&gt;&lt;li&gt;postprocessFrame()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Update metrics from preprocessFrame&lt;/li&gt;&lt;li&gt;Maybe save a picture or continue creating video &lt;/li&gt;&lt;/ol&gt;&lt;li&gt;postprocessSimulation()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Collect data of metrics for simulation&lt;/li&gt;&lt;li&gt;Do not remove or clear data yet. &lt;/li&gt;&lt;li&gt;Maybe write out data to file.&lt;/li&gt;&lt;li&gt;This function is the best time to perform any kind of processing over data collected from the simulation.&lt;/li&gt;&lt;/ol&gt;&lt;li&gt;cleanupSimulation()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Now data allocated data for the scenario can be reclaimed&lt;/li&gt;&lt;li&gt;Here is when the data structures can be emptied and delete before now that any data collected from the simulation has been processed.&lt;/li&gt;&lt;/ol&gt;&lt;li&gt;finish()&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Now simulation components can be deleted because no more simulation will be done.&lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;<br />I find this separation of allocating objects and data structures and creation of items that go in the data structures very helpful. In helps avoid accidentally accessing data structures before they are done being created. It also helps define the ordering in which types of objects should be added to the simulation. As with any software you never really know what is going to be done with it in the future and I think this structure covers many unseen possibilities.<br /><br />&lt;ol&gt;&lt;/ol&gt;</p>

  </div><a class="u-url" href="/posts_drafts/2015-10-21-simulation-engine-flow-of-control" hidden></a>
</article>

        </div>
    </main><footer class="site-footer h-card">
    <data class="u-url" href="/%20/"></data>

    <div class="wrapper">
        

        <div class="footer-col-wrapper">
            <div class="footer-col footer-col-1">
                <ul class="contact-list">
                    <li class="p-name">Glen Berseth</li></ul>
            </div>

            <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/neo-x"><svg
                class="svg-icon">
                <use xlink:href="/assets/minima-social-icons.svg#github"></use>
            </svg> <span class="username">neo-x</span></a></li><li><a
            href="https://www.linkedin.com/in/glen-berseth-0523278b"><svg class="svg-icon">
                <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
            </svg> <span class="username">glen-berseth-0523278b</span></a></li><li><a
            href="https://www.twitter.com/GlenBerseth"><svg class="svg-icon">
                <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
            </svg> <span class="username">GlenBerseth</span></a></li><li><a rel="me"
            href="https://www.youtube.com/channel/UCOouaBg4gHIlNvPkJn_8ooA"
            title="Real Lab"><svg class="svg-icon grey">
                <use xlink:href="/assets/minima-social-icons.svg#youtube"></use>
            </svg> <span class="username">Real Lab</span></a></li></ul></div>

            <div class="footer-col footer-col-3">
                <p>I (he/him/il) am an assistant professor at the University de Montreal and Mila. My research explores how to use deep learning and reinforcement learning to develop generalist robots.</p>
            </div>
        </div>

    </div>

</footer></body>

</html>