---
layout: post
title: Mesh Subdivision with the Loop Algorithm
date: '2014-10-12T13:25:00.000-07:00'
author: Glen Berseth
tags: 
modified_time: '2014-10-12T13:34:19.882-07:00'
cover: <div> <img width="45%" src="/assets/projects/subdivision/CowHead-1.png"/> <img width="45%" src="/assets/projects/subdivision/CowHead-2.png"/> </div>
summary: Recently I have been learning more about polygonal meshes and operations you can perform on them. One of the first operations that can be done on a mesh, that is a kind of cool, is subdivision. The basic idea is that you have a mesh that is very course (few polygons, rough) and we want a method that can construct a smoother mesh from this course mesh. This has been a popular method for constructing extremely smooth meshes for movies for many years.
---

Recently I have been learning more about Polygonal meshes and operations you can perform on them. One of the first operations that can be done on a mesh, that is a kind of cool, is subdivision. The basic idea is that you have a mesh that is very course (few polygons, rough) and we want a method that can construct a smoother mesh from this course mesh. This has been a popular method for constructing extremely smooth meshes for movies for many years. <br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-AICgkcR7QK0/VDrdccOm27I/AAAAAAAAA7o/MSfZ_KHUIMg/s1600/camel_simple_wire.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-AICgkcR7QK0/VDrdccOm27I/AAAAAAAAA7o/MSfZ_KHUIMg/s1600/camel_simple_wire.png" height="332" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-zTXOQ4xit5Y/VDrdox2CbDI/AAAAAAAAA8Q/Apm57rjHToM/s1600/camel_simple.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-zTXOQ4xit5Y/VDrdox2CbDI/AAAAAAAAA8Q/Apm57rjHToM/s1600/camel_simple.png" height="334" width="640" /></a></div><br /><picture course="" mesh="" of=""></picture><br /><br /><br />This is an example very course mesh of a Camel. This mesh was not constructed this way by chance. An artist spent many hours adjusting verticies (points) and faces (polygons or triangles) on this mesh in order for subdivision to work well. <br /><br />The Loop algorithm is a popular algorithm to perform mesh subdivision. One reason for its popularity is that it ensures that after subdivision the mesh is C2 continuous (smooth second derivative on surface) everywhere on the mesh except for at extreme points.<br /><br />After lots of careful thought I decided to implement the algorithm in 3 steps.<br /><ol><li>Add all of the new verticies for the mesh (easy)</li><ol><li>Take every edge and add a new point between the two points that define the edge</li></ol><li>Construct/fix all of the polygons in the mesh (not so easy)</li><ol><li>Add edges between all of the new points and update the face/polygon labels for these edges</li><li>Most bugs came from this step</li></ol><li>Compute the new positions of the verticies on a copy of the mesh from 2 (almost easy)</li><ol><li>Simply use the old mesh to compute all of the neighbours for old points.&nbsp;</li><li>Computed the weighted sum of positions from neighbours and selected point (See loop Algorithm) and assign this position on the mesh copy</li><li>For new points I used the new mesh to get the neighbours of each new point that was in the old mesh</li><li>Last I had to run a query to get the edge between the points from (3). This got me the edge I should use to find the last two neighbour points for the Loop Algorithm</li></ol></ol>The coding also assumes some knowledge of how to work with a half-edge data structure for the mesh.<br /><br />original mesh <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Uf4SAD-tT4s/VDrdnvQNnoI/AAAAAAAAA78/jyj1RMYy72Y/s1600/CowHead-smooth-1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-Uf4SAD-tT4s/VDrdnvQNnoI/AAAAAAAAA78/jyj1RMYy72Y/s1600/CowHead-smooth-1.png" height="298" width="320" /></a></div><br /><br />After one subdivision<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-8Byl43ouCGM/VDrdnXxvtzI/AAAAAAAAA70/r8DQnGfa90k/s1600/CowHead-1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-8Byl43ouCGM/VDrdnXxvtzI/AAAAAAAAA70/r8DQnGfa90k/s1600/CowHead-1.png" height="266" width="320" /></a><a href="http://3.bp.blogspot.com/-hQ9wMMlKqMY/VDrdn66ifbI/AAAAAAAAA8o/FawQ6AEBI4M/s1600/CowHead-smooth-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-hQ9wMMlKqMY/VDrdn66ifbI/AAAAAAAAA8o/FawQ6AEBI4M/s1600/CowHead-smooth-2.png" height="314" width="320" /></a></div><br /><br />After two<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-q_tVWUpyEbo/VDrdnaprKoI/AAAAAAAAA7w/omzVnBVUfwM/s1600/CowHead-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-q_tVWUpyEbo/VDrdnaprKoI/AAAAAAAAA7w/omzVnBVUfwM/s1600/CowHead-2.png" height="278" width="320" /></a><a href="http://4.bp.blogspot.com/-nunQjpuFamI/VDrdoCuP-WI/AAAAAAAAA8A/_Y0gXrdtKF8/s1600/CowHead-smooth-3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-nunQjpuFamI/VDrdoCuP-WI/AAAAAAAAA8A/_Y0gXrdtKF8/s1600/CowHead-smooth-3.png" height="312" width="320" /></a></div><br />After three<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-c89yG2pWFEM/VDrdnihOCKI/AAAAAAAAA74/xQdoXXmKO40/s1600/CowHead-3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-c89yG2pWFEM/VDrdnihOCKI/AAAAAAAAA74/xQdoXXmKO40/s1600/CowHead-3.png" height="291" width="320" /></a><a href="http://4.bp.blogspot.com/-xuH-cbOARn8/VDrfxnQAUdI/AAAAAAAAA88/ZWucJn2ytv0/s1600/CowHead-smooth-4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-xuH-cbOARn8/VDrfxnQAUdI/AAAAAAAAA88/ZWucJn2ytv0/s1600/CowHead-smooth-4.png" height="298" width="320" /></a></div><br /><br /><br />final mesh<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-NVn9abY_Twk/VDrdoRnRh6I/AAAAAAAAA8E/9E3gLJhy14k/s1600/CowHead-smooth.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-NVn9abY_Twk/VDrdoRnRh6I/AAAAAAAAA8E/9E3gLJhy14k/s1600/CowHead-smooth.png" height="602" width="640" /></a></div><br />Camel mesh after simplifaction<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-MCFc0-Ef-OA/VDrdok6Hz8I/AAAAAAAAA8M/ZSCrD2xMWMw/s1600/camel_simple-smooth.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-MCFc0-Ef-OA/VDrdok6Hz8I/AAAAAAAAA8M/ZSCrD2xMWMw/s1600/camel_simple-smooth.png" height="332" width="640" /></a></div><br /><br /><br /><br />References:<br /><ol><li>http://www.cs.ubc.ca/labs/imager/tr/2014/CartelModeling/Cartel_website/</li><li>https://www.graphics.rwth-aachen.de/media/papers/sqrt31.pdf</li><li>http://research.microsoft.com/en-us/um/people/cloop/thesis.pdf</li></ol>